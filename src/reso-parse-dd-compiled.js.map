{"version":3,"sources":["reso-parse-dd.js"],"names":[],"mappings":"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","file":"reso-parse-dd-compiled.js","sourcesContent":["var fs     = require('fs');\nvar path   = require('path');\nvar lodash = require('lodash');\nvar xml2js = require('xml2js');\nvar jsonld = require('jsonld');\n\n\nvar config = {\n    parse:           {\n        defaultSource: './data/reso_ddwiki_v15.xml',\n        metaFields:    ['CertificationLevel'],\n        classes:       true,\n        properties:    true,\n        // lookups aren't supported in this version.\n        lookups:       false,\n        ignoreValues:  [\"<n/a>\"]\n    },\n    header:          {\n        comments: \"# Generated by reso-parse-wiki\\n\",\n        prefixes: {\n            reso:   \"https://yodata.io/reso/dd#\",\n            enum:   \"https://yodata.io/reso/enum#\",\n            rdf:    \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n            rdfs:   \"http://www.w3.org/2000/01/rdf-schema#\",\n            xsd:    \"http://www.w3.org/2001/XMLSchema#\",\n            owl:    \"http://www.w3.org/2002/07/owl#\",\n            dc:     \"http://purl.org/dc/elements/1.1/\",\n            schema: \"http://schema.org/\",\n            vs:     \"http://www.w3.org/2003/06/sw-vocab-status/ns#\"\n        },\n    },\n    turtle:          {\n        tabLength: 2,\n        keyLength: 16,\n    },\n    addValueOptions: {\n        allowDuplicate: false\n    }\n};\n\nvar _xmlToJson = function xmlToJson(pathToXmlSource, callback) {\n    var parser = new xml2js.Parser();\n    fs.readFile(pathToXmlSource, function (err, xmlData) {\n        parser.parseString(xmlData, function (err, jsonData) {\n            if (typeof callback === 'function') {\n                return callback(err, jsonData);\n            }\n            console.dir(jsonData);\n            console.log('done');\n        });\n    });\n};\n\nfunction Subject(id, type) {\n    \"use strict\";\n    Object.defineProperties(this, {\n        id:   {value: id},\n        type: {value: type}\n    });\n}\n\nSubject.prototype.addValue = function addValue(property, value) {\n    \"use strict\";\n    if (typeof value === 'string') {\n\n        if (config.parse.ignoreValues.includes(value)) {\n            return this;\n        }\n        if (value.includes(':')) {\n            if (value.startsWith('_:')) {\n                jsonld.addValue(this, property, value, config.addValueOptions);\n                return this;\n            } else if (value.startsWith('http')) {\n                jsonld.addValue(this, property, '<' + value + '>', config.addValueOptions);\n                return this;\n            } else if (config.header.prefixes.hasOwnProperty(value.substring(0, value.indexOf(\":\")))) {\n                jsonld.addValue(this, property, value, config.addValueOptions);\n                return this;\n            }\n        } else {\n            jsonld.addValue(this, property, JSON.stringify(value), config.addValueOptions);\n            return this;\n        }\n    } else if (Array.isArray(value)) {\n        var sub = this;\n        value.forEach(function (v) {\n            sub.addValue(property, v);\n        });\n    }\n    return this;\n};\n\nSubject.prototype.toTurtle = function toTurtle() {\n    \"use strict\";\n    var indent  = ' '.repeat(config.turtle.tabLength);\n    var keys    = Object.keys(this).sort();\n    var subject = this;\n    var result  = [`${this.id} a ${this.type}`];\n    keys.forEach(function (key) {\n        var paddedKey = lodash.padEnd(key, config.turtle.keyLength);\n        var value     = subject[key];\n        result.push(indent + paddedKey + ' ' + value);\n    });\n    return result.join(' ;\\n') + '\\n.\\n';\n};\n\nvar parseResoWikiXML = function parseResoWikiXML(pathToXmlSource, options, callback) {\n    \"use strict\";\n    var sourcePath = pathToXmlSource || config.parse.defaultSource;\n    _xmlToJson(sourcePath, function (err, jsonData) {\n        if (typeof jsonData !== 'undefined') {\n            var subjectIndex = [];\n\n            var src  = path.parse(sourcePath);\n            var dest = './ns/' + src.name + '.ttl';\n            fs.openSync(dest, 'w+');\n\n            var file        = jsonData['reso-ddwiki-export'];\n            var fileMeta    = file.$;\n            var copyright   = fileMeta['Copyright'].replace(/\\n/g, '\\n# ');\n            var fileVersion = fileMeta['DDWikiVersion'];\n\n\n            // file header\n\n            fs.appendFileSync(dest, `# DDWikiVersion: ${fileVersion}\\n#\\n`);\n            fs.appendFileSync(dest, `# ${copyright}\\n\\n`);\n            fs.appendFileSync(dest, config.header.comments);\n\n            // prefixes\n            lodash.forEach(config.header.prefixes, function (uri, prefix) {\n                fs.appendFileSync(dest, `@prefix ${prefix}: <${uri}> .\\n`);\n            });\n            fs.appendFileSync(dest, '\\n\\n');\n\n            // document info\n            var doc = new Subject('<>', 'owl:Ontology')\n                .addValue('dc:title', 'Real Estate Standards Vocabulary (RESO)')\n                .addValue('dc:description', 'Mapping of the RESO Data Dictionary to RDF.')\n                .addValue('rdfs:label', 'RESO Data Diction - RDF Vocabulary')\n                .addValue('dc:publisher', 'http://www.reso.org')\n                .addValue('dc:creator', \"_:DaveDuran\");\n\n            var creator = new Subject('_:DaveDuran', 'schema:Person')\n                .addValue('schema:name', 'Dave Duran')\n                .addValue('schema:email', 'dave@yodata.io');\n\n\n            fs.appendFileSync(dest, doc.toTurtle());\n            fs.appendFileSync(dest, creator.toTurtle());\n\n\n            // classes\n            fs.appendFileSync(dest, '\\n\\n# classes\\n\\n');\n            var resources = file['Resource'];\n            resources.forEach(function (resource) {\n                var classMeta    = resource.$;\n                var classComment = classMeta['WikiPageTitle'];\n                var classWikiURL = classMeta['WikiPageURL'];\n                var classLabel   = classComment.slice(0, -9);\n                var classCURI    = `reso:${classLabel}`;\n\n                var subject = new Subject(classCURI, 'rdfs:Class')\n                    .addValue('rdfs:label', classLabel)\n                    .addValue('rdfs:comment', classComment)\n                    .addValue('schema:sameAs', classWikiURL, 'IRI');\n\n                fs.appendFileSync(dest, subject.toTurtle());\n            });\n\n            // properties\n            if (config.parse.properties) {\n                fs.appendFileSync(dest, \"\\n# properties \\n\\n\");\n                resources.forEach(function (resource) {\n                    var classMeta    = resource.$;\n                    var classComment = classMeta['WikiPageTitle'];\n                    var classLabel   = classComment.slice(0, -9);\n                    var classCURI    = `reso:${classLabel}`;\n\n                    var resourceProperties = resource['Field'];\n                    resourceProperties.forEach(\n                        function (prop) {\n                            var propMeta    = prop.$;\n                            var propWikiURL = propMeta['WikiPageURL'];\n                            var propLabel   = prop['StandardName'][0];\n                            var propCURI    = `reso:${propLabel}`;\n\n                            var subject = lodash.get(subjectIndex, propCURI);\n\n                            if (typeof subject === 'undefined') {\n                                subject                = new Subject(propCURI, 'rdf:Property');\n                                subjectIndex[propCURI] = subject;\n                            }\n\n                            subject\n                                .addValue('rdfs:label', propLabel)\n                                .addValue('rdfs:domain', classCURI, 'id')\n                                .addValue('schema:sameAs', propWikiURL);\n\n                            if (prop.hasOwnProperty('Definition')) {\n                                subject.addValue('rdfs:comment', prop['Definition']);\n                            }\n\n                            if (prop.hasOwnProperty('FieldDefinition')) {\n                                subject.addValue('rdfs:comment', prop['FieldDefinition']);\n                            }\n\n\n                            var dataType = lodash.toLower(prop['SimpleDataType']);\n                            switch (dataType) {\n                                case 'string':\n                                case 'boolean':\n                                case 'date':\n                                    subject.addValue('rdfs:range', `xsd:${dataType}`, 'id');\n                                    break;\n                                case 'timestamp':\n                                    subject.addValue('rdfs:range', `xsd:dateTime`, 'id');\n                                    break;\n                                case 'number':\n                                    subject.addValue('rdfs:range', 'xsd:decimal');\n                                    break;\n                                case 'string list, single':\n                                case 'string list, multi':\n                                    if (typeof prop['Lookup'] !== 'undefined') {\n                                        var lookup = lodash.first(prop['Lookup']);\n                                        if (typeof lookup === 'string' && lookup[0] === '<') {\n                                            lookup = undefined;\n                                        } else {\n                                            lookup = lookup.substr(0, lookup.indexOf(' '));\n                                        }\n                                    }\n                                    if (lookup) {\n                                        subject.addValue('rdfs:range', `enum:${lookup}`);\n                                    } else {\n                                        subject.addValue('rdfs:range', 'xsd:string', 'id');\n                                    }\n\n                                    break;\n                                default:\n                                    throw new Error('unknown dataType' + dataType);\n                            }\n\n                            var elementStatus = lodash.toLower(prop['ElementStatus']);\n                            switch (elementStatus) {\n                                case 'active':\n                                    subject.addValue('vs:term_status', 'stable');\n                                    break;\n                                case 'proposed':\n                                    subject.addValue('vs:term_status', 'testing');\n                                    break;\n                                default:\n                                    subject.addValue('reso:ElementStatus', elementStatus);\n                            }\n\n                            if (prop['PropertyTypes']) {\n                                var propTypes = prop['PropertyTypes'][0]['Class'];\n                                subject.addValue('reso:PropertyTypes', propTypes);\n                            }\n\n                            config.parse.metaFields.forEach(function (key) {\n                                var value = prop[key];\n                                if (typeof value !== 'undefined') {\n                                    subject.addValue(`reso:${key}`, value);\n                                }\n                            });\n\n                            fs.appendFileSync(dest, subject.toTurtle());\n                        }\n                    );\n\n                });\n            }\n\n            /**\n             *  parse lookups : not yet implemented.\n             */\n            if (config.parse.lookups) {\n                // var lookups = file['LookupValues'][0]['LookupField'];\n                // lookups.forEach(function (lookupField) {\n                //     console.dir(lookupField);\n                // });\n            }\n        }\n        if (err) {\n            return (typeof callback === 'function') ? callback(err) : console.error(err);\n        }\n    });\n};\n\nmodule.exports = {config, parseResoWikiXML};\n"]}